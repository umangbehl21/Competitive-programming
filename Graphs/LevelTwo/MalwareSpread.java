import java.util.Arrays;

public class MalwareSpread {
   static  int par[];  //parent array
   static int size[]; //size array
    public static int find(int x,int par[])
    {
        if(x == par[x])
        {
            return x;
        }
        par[x] = find(par[x], par);
        return par[x];
    }
    public static void union(int p1,int p2)
    {
        if(size[p1] > size[p2])
        {
            par[p2] = p1;
            size[p1]+= size[p2];
        }
        else 
        {
            par[p1] = p2;
            size[p2] += p1;
        }
    }
    public static int minmalwarespread(int graph[][],int initial[])
    {
        int n = graph.length;
        par = new int[n];
        size = new int[n];
        for(int i = 0;i<n;i++)
        {
            par[i] = i;
            size[i] = 1;
        }
        for(int i= 0;i<n;i++)
        {
            for(int j = 0;j<n;j++)
            {
                if(graph[i][j] == 1)
                {
                    int p1 = find(i, par);
                    int p2 = find(j, par);
                    if(p1 != p2)
                    {
                        union(p1, p2);
                    }
                }
            }
        }
        int infected[] = new int[n];
        for(int e : initial)
        {
            int p = find(e,par);
            infected[p]++;
        }
        int ans = -1;
        int maxSize = -1;
        // Arrays.sort(initial);
        for(int e : initial)
        {
            int p = find(e, par);
            if(infected[p] == 1 && size[p] >= maxSize)
            {
                if(maxSize == size[p])
                {
                    ans = Math.min(ans, e);
                }
                else 
                {
                    ans = e;
                }
                maxSize = size[p];
            }
        }
        if(ans == -1) 
        {
            int min = n + 1;
            for(int e : initial)
            {
                min = Math.min(min, e);
            }
            return min;
        }
        return ans;
    }
    public static void main(String[] args) {
        int graph[][] = {{1,1,1,0},{0,0,0,0},{0,0,0,0},{1,1,1,1}};
        int initial[] = {0,3};
       System.out.println(minmalwarespread(graph,initial)); 
    }
}
